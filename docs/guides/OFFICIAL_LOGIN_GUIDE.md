# 微博Cookie获取使用指南

## 🎯 功能说明

通过微博官方页面登录，手动获取Cookie，安全可靠。

## 📝 使用方法

### 唯一方法：官方页面获取Cookie ⭐

1. **打开设置页面**
   - 点击主界面左侧的 ⚙️ 设置按钮

2. **点击"获取Cookie"按钮**
   - 在"微博 Cookie"部分，点击 `🌐 获取Cookie` 按钮

3. **在系统浏览器中登录**
   - 会自动打开系统默认浏览器，加载 **m.weibo.cn** 页面
   - 在浏览器中正常登录您的微博账号（支持验证码、扫码等所有官方登录方式）

4. **获取Cookie（手动复制）**
   - 登录成功后，在浏览器中按 `F12` 键打开开发者工具
   - 切换到 `Console`（控制台）标签
   - 输入以下命令并回车：
     ```javascript
     document.cookie
     ```
   - 复制输出的**完整内容**（一长串文本，包含SUB、SUBP等字段）
   - 粘贴到主窗口的Cookie输入框中
   - 点击"保存"按钮

## 🔍 如何在浏览器中查看Cookie

### Chrome / Edge 浏览器

1. 登录微博后，按 `F12` 打开开发者工具
2. 点击顶部的 `Console`（控制台）标签
3. 在底部输入框中输入：`document.cookie`
4. 按 `Enter` 回车
5. 复制输出的整行文本（通常是一长串，包含SUB、SUBP等字段）

### Firefox 浏览器

1. 登录微博后，按 `F12` 打开开发者工具
2. 点击 `控制台` 标签
3. 输入 `document.cookie` 并回车
4. 复制输出结果

### Safari 浏览器

1. 先启用开发者菜单：Safari > 偏好设置 > 高级 > 勾选"在菜单栏中显示开发菜单"
2. 登录微博后，点击菜单栏 开发 > 显示JavaScript控制台
3. 输入 `document.cookie` 并回车
4. 复制输出结果

## ⚠️ 重要注意事项

1. **必须从 m.weibo.cn 获取**
   - ⚠️ 必须从 **m.weibo.cn** (移动版微博) 获取Cookie
   - ❌ 不要从 weibo.com (桌面版) 获取，会导致上传失败
   - Cookie中必须包含 `SUB=` 和 `SUBP=` 等字段

2. **Cookie安全**
   - Cookie包含您的登录凭证，请勿分享给他人
   - 本应用使用加密存储，Cookie仅保存在本地

3. **Cookie有效期**
   - 微博Cookie通常30天左右过期
   - 过期后需要重新登录获取

4. **登录安全**
   - 使用官方页面登录最安全，支持所有验证方式（验证码、滑块、扫码等）
   - 直接在浏览器操作，不经过第三方

## 🐛 常见问题

### Q: 复制的Cookie很长，正常吗？
A: **正常！** Cookie通常包含几百到上千个字符，包含SUB、SUBP、_T_WM等多个字段。

### Q: Cookie测试连接失败？
A: 请检查：
   1. ⚠️ **是否从 m.weibo.cn 获取**（最常见的错误）
   2. Cookie是否完整复制（不要漏掉开头或结尾）
   3. Cookie是否包含 `SUB=` 和 `SUBP=` 字段
   4. 登录时是否真的成功进入了微博主页

### Q: 为什么必须从 m.weibo.cn 获取？
A: 因为本应用使用的是微博移动版API（m.weibo.cn）上传图片，需要移动版的Cookie才能正常工作。桌面版（weibo.com）的Cookie无法在移动版API使用。

### Q: 为什么不做自动登录？
A: 微博有严格的风控系统，自动登录容易触发验证码或被拦截。使用官方浏览器手动登录是最稳定可靠的方式。

### Q: document.cookie 输出为空怎么办？
A: 可能原因：
   1. 未成功登录微博
   2. Cookie被浏览器隐私设置阻止
   3. 在错误的页面（确保在 m.weibo.cn）

## 🎉 完整使用流程

```
1. 点击应用中的"获取Cookie"按钮
   ↓
2. 在打开的浏览器中访问 m.weibo.cn
   ↓
3. 登录您的微博账号（支持验证码/扫码）
   ↓
4. 登录成功后按 F12 打开开发者工具
   ↓
5. 切换到 Console（控制台）
   ↓
6. 输入：document.cookie
   ↓
7. 复制输出的完整内容
   ↓
8. 粘贴到应用的Cookie输入框
   ↓
9. 点击保存
   ↓
10. 开始上传图片！✨
```

## 📸 示例截图说明

正确的Cookie格式示例（部分）：
```
SUB=_2A25K...; SUBP=0033...; _T_WM=123...; ALF=1234567890; ...
```

---

**更新日期**：2025-11-17
**版本**：v1.2.0 - 简化版（移除自动登录）

